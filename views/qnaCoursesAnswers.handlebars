<main class="h-auto w-100" id="main-qna">
  <section
    class="d-flex flex-column justify-content-start align-content-start pt-5"
    id="qna"
  >
    <!-- Header Buttons -->
    <div class="d-flex justify-content-between align-items-center px-3">
      <button
        type="button"
        class="btn btn-outline-secondary rounded-pill mb-2 mt-0"
        onclick="history.back()"
      >
        <i class="bi bi-arrow-left"></i>
      </button>
      <button
        type="button"
        class="btn btn-outline-dark btn-md m-3 text-center fs-4 fw-lighter text-secondary rounded-pill"
        style="width: auto;"
        data-bs-toggle="modal"
        data-bs-target="#answerModal"
        title="Add Answer"
      >
        <i class="bi bi-plus"></i>
      </button>
    </div>

    <!-- Question Display -->
    {{#if questions}}
      <div
        class="m-3 px-3"
        data-question-id="{{questions.questionId}}"
        id="question-container"
      >
        <p id="question-user-id">{{questions.questionUserId}}</p>
        <h3>{{questions.title}}</h3>
        <p>{{questions.description}}</p>
        <p class="" id="question-creation-date">{{questions.createdAt}}</p>
      </div>
    {{/if}}

    <!-- Answer Modal -->
    <div
      class="modal fade"
      id="answerModal"
      tabindex="-1"
      aria-labelledby="answerModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-5" id="answerModalLabel">Post Answer</h1>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <div class="mb-3">
              <label for="answer" class="form-label">Answer</label>
              <textarea
                class="form-control"
                id="answer"
                rows="3"
                placeholder="Write your answer here..."
              ></textarea>
            </div>
          </div>
          <div class="modal-footer">
            <button type="submit" id="add-answer" class="btn btn-primary">
              POST
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Answers Display -->
    {{#if answersInfo}}
      <div class="border border-start-0 border-end-0 m-3">
        {{#each answersInfo}}
          <div
            class="card m-4 border-0 mx-2 my-4 bg-white"
            data-answer-id="{{answerId}}"
          >
            <div
              class="card-header border-0 bg-white d-flex justify-content-between"
            >
              <h5 id="answer-user-id">{{answerUserId}}</h5>
              <div class="d-flex gap-2" id="del-edit-container">
                {{#if isUser}}
                  <button
                    class="btn btn-outline-danger btn-sm"
                    id="delete-btn"
                  >DEL</button>
                {{/if}}
              </div>
            </div>

            <div class="card-body px-4 py-2 bg-white">
              <p class="card-text">{{answer}}</p>
              <p class="" id="answer-creation-date">{{createdAt}}</p>
              <div class="d-flex gap-2 w-auto">
                <div
                  class="d-flex justify-content-center align-items-center gap-1 text-center border rounded-pill p-1"
                >
                  <button
                    class="btn btn-outline-secondary rounded-pill border-0 p-0"
                    id="like-btn"
                    title="Like"
                  >
                    <i class="bi bi-hand-thumbs-up"></i>
                  </button>
                  <p
                    class="align-items-center m-0"
                    id="like-count"
                  >{{likes}}</p>
                </div>
              </div>
            </div>
          </div>
        {{/each}}
      </div>
    {{else}}
      <div class="card m-4 border-0 mx-2 my-4 bg-white">
        <div class="card-body p-4 bg-white">
          <h5 class="card-title">No answers found for this question</h5>
        </div>
      </div>
    {{/if}}

  </section>
  <script type="module" src="/public/js/answers.js"></script>
</main>